/* =========================================================
   Option B (Updated v3):
   Editorial + Side Rail + Bigger Type
   + system UI font
   + footer matches background (NO line)
   + links: hover = animated solid underline only
   ========================================================= */

/* ---------- Design tokens ---------- */
:root{
  --nk-accent: #500000;                 /* TAMU maroon */
  --nk-ink: rgba(17,24,39,.92);
  --nk-muted: rgba(17,24,39,.62);
  --nk-line: rgba(17,24,39,.12);
  --nk-paper: #fbfbf9;                  /* paper tone */

  --nk-radius: 14px;
  --nk-radius-sm: 10px;
}

body.dark{
  --nk-ink: rgba(255,255,255,.92);
  --nk-muted: rgba(255,255,255,.62);
  --nk-line: rgba(255,255,255,.14);
  --nk-paper: #0c0f14;
}

/* ---------- Typography (system UI) ---------- */
:root{
  --font-heading: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont,
                  "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans",
                  "Liberation Sans", sans-serif;
  --font-body: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont,
               "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans",
               "Liberation Sans", sans-serif;
  --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
               "Liberation Mono", "Courier New", monospace;
}

body{
  font-family: var(--font-body);
  font-weight: 400;
  letter-spacing: 0.002em;
  background: var(--nk-paper) !important;
  color: var(--nk-ink);
  font-size: 18px;
}
@media (max-width: 680px){
  body{ font-size: 17px; }
}

/* Headings */
h1,h2,h3,h4, nav, .navbar, .logo, #menu{
  font-family: var(--font-heading);
  letter-spacing: -0.012em;
  color: var(--nk-ink);
}
h1{ font-weight: 700; font-size: clamp(2.05rem, 3.2vw, 2.6rem); }
h2{ font-weight: 750; font-size: clamp(1.55rem, 2.4vw, 2.0rem); }
h3{ font-weight: 700; font-size: clamp(1.25rem, 2.0vw, 1.55rem); }

/* Content + side rail */
.post-content{
  line-height: 1.75;
  font-size: 1.06rem;
  position: relative;
  padding-left: 1.05rem;
  border-left: 3px solid color-mix(in srgb, var(--nk-accent) 20%, transparent);
}
@media (max-width: 680px){
  .post-content{ font-size: 1.03rem; }
}
body.dark .post-content{
  border-left: 3px solid color-mix(in srgb, #ddd8d8 22%, transparent);
}

/* Remove rail on home/profile */
.profile .post-content,
.profile-mode .post-content,
.home-info .post-content{
  border-left: none !important;
  padding-left: 0 !important;
}

/* Header */
.header,
.nav,
.site-header,
.header .nav{
  background: var(--nk-paper) !important;
  border-bottom: 1px solid var(--nk-line) !important;
  box-shadow: none !important;
  -webkit-backdrop-filter: none !important;
  backdrop-filter: none !important;
}

/* Footer: same background, NO top line */
.footer,
.footer__inner,
.footer .footer__inner,
.footer .footer__content,
.footer .footer__container,
#footer{
  background: var(--nk-paper) !important;
  border-top: none !important;
  box-shadow: none !important;
}
body.dark .footer,
body.dark .footer__inner,
body.dark .footer .footer__inner,
body.dark .footer .footer__content,
body.dark .footer .footer__container,
body.dark #footer{
  background: var(--nk-paper) !important;
  border-top: none !important;
}

/* =========================================================
   LINKS
   - No underline by default
   - Hover: animated solid underline only
   - Icon/SVG links: magnify on hover (unchanged)
   ========================================================= */

/* Base link reset */
.profile-mode a,
.profile a,
.home-info a,
#profile a,
.post-content a,
.post-entry a{
  text-decoration: none !important;
  position: relative;
  color: inherit;
}

/* ---------- Text links: NO underline by default ---------- */
.profile-mode a:not(:has(svg)):not(.button),
.profile a:not(:has(svg)):not(.button),
.home-info a:not(:has(svg)):not(.button),
#profile a:not(:has(svg)):not(.button),
.post-content a:not(:has(svg)):not(.button),
.post-entry a:not(:has(svg)):not(.button){
  display: inline-block;
  padding-bottom: 2px;
  border-bottom: none;                 /* removed dotted underline */
  transition: color .2s ease;
}

/* Animated underline layer (solid) */
.profile-mode a:not(:has(svg)):not(.button)::after,
.profile a:not(:has(svg)):not(.button)::after,
.home-info a:not(:has(svg)):not(.button)::after,
#profile a:not(:has(svg)):not(.button)::after,
.post-content a:not(:has(svg)):not(.button)::after,
.post-entry a:not(:has(svg)):not(.button)::after{
  content:"";
  position:absolute;
  left:0;
  bottom:-2px;
  width:100%;
  height:2px;
  background: var(--nk-accent);
  transform: scaleX(0);
  transform-origin:left;
  transition: transform .25s ease, background .25s ease;
  pointer-events:none;
}

body.dark .profile-mode a:not(:has(svg)):not(.button)::after,
body.dark .profile a:not(:has(svg)):not(.button)::after,
body.dark .home-info a:not(:has(svg)):not(.button)::after,
body.dark #profile a:not(:has(svg)):not(.button)::after,
body.dark .post-content a:not(:has(svg)):not(.button)::after,
body.dark .post-entry a:not(:has(svg)):not(.button)::after{
  background:#ddd8d8;
}

/* Hover: show animated underline */
.profile-mode a:not(:has(svg)):not(.button):hover,
.profile a:not(:has(svg)):not(.button):hover,
.home-info a:not(:has(svg)):not(.button):hover,
#profile a:not(:has(svg)):not(.button):hover,
.post-content a:not(:has(svg)):not(.button):hover,
.post-entry a:not(:has(svg)):not(.button):hover{
  color: var(--nk-accent);
  border-bottom-color: color-mix(in srgb, var(--nk-accent) 22%, transparent);
}
.profile-mode a:not(:has(svg)):not(.button):hover::after,
.profile a:not(:has(svg)):not(.button):hover::after,
.home-info a:not(:has(svg)):not(.button):hover::after,
#profile a:not(:has(svg)):not(.button):hover::after,
.post-content a:not(:has(svg)):not(.button):hover::after,
.post-entry a:not(:has(svg)):not(.button):hover::after{
  transform: scaleX(1);
}

body.dark .profile-mode a:not(:has(svg)):not(.button):hover,
body.dark .profile a:not(:has(svg)):not(.button):hover,
body.dark .home-info a:not(:has(svg)):not(.button):hover,
body.dark #profile a:not(:has(svg)):not(.button):hover,
body.dark .post-content a:not(:has(svg)):not(.button):hover,
body.dark .post-entry a:not(:has(svg)):not(.button):hover{
  color:#ddd8d8;
  border-bottom-color: color-mix(in srgb, #ddd8d8 26%, transparent);
}

/* No underline effect on buttons */
.profile-mode .buttons a::after,
.profile .buttons a::after,
.button::after,
.btn::after{
  display:none !important;
}

/* ---------- Icon/SVG links: magnify on hover ---------- */
.profile-mode a:has(svg),
.profile a:has(svg),
.home-info a:has(svg),
#profile a:has(svg),
.social-icons a:has(svg),
.post-content a:has(svg){
  display:inline-block;
  transition: transform .25s ease, color .25s ease, fill .25s ease, stroke .25s ease;
}

.profile-mode a:has(svg):hover,
.profile a:has(svg):hover,
.home-info a:has(svg):hover,
#profile a:has(svg):hover,
.social-icons a:has(svg):hover,
.post-content a:has(svg):hover{
  transform: scale(1.18);
  color: var(--nk-accent);
}

body.dark .profile-mode a:has(svg):hover,
body.dark .profile a:has(svg):hover,
body.dark .home-info a:has(svg):hover,
body.dark #profile a:has(svg):hover,
body.dark .social-icons a:has(svg):hover,
body.dark .post-content a:has(svg):hover{
  color:#ddd8d8;
}

/* SVG strokes follow hover */
body:not(.dark) .social-icons a:has(svg):hover svg{
  fill:none !important;
  stroke: var(--nk-accent) !important;
}
body.dark .social-icons a:has(svg):hover svg{
  fill:none !important;
  stroke:#ddd8d8 !important;
}

/* Fallback if :has isn't supported */
@supports not selector(a:has(svg)) {
  .post-content a:hover,
  .post-entry a:hover,
  .profile-mode a:hover,
  .profile a:hover,
  .home-info a:hover,
  #profile a:hover{
    color: var(--nk-accent);
  }
  body.dark .post-content a:hover,
  body.dark .post-entry a:hover,
  body.dark .profile-mode a:hover,
  body.dark .profile a:hover,
  body.dark .home-info a:hover,
  body.dark #profile a:hover{
    color: #ddd8d8;
  }
}

/* Buttons: editorial pill */
.button,
.btn,
.home-info .button{
  border: 1.7px solid var(--nk-line) !important;
  background: transparent !important;
  color: var(--nk-ink) !important;
  border-radius: 999px !important;
  box-shadow: none !important;
  transition: transform .14s ease, border-color .18s ease, background .18s ease, color .18s ease;
}
.button:hover,
.btn:hover,
.home-info .button:hover{
  transform: translateY(-1px);
  border-color: color-mix(in srgb, var(--nk-accent) 55%, transparent) !important;
  background: color-mix(in srgb, var(--nk-accent) 8%, transparent) !important;
  color: var(--nk-accent) !important;
}
body.dark .button:hover,
body.dark .btn:hover,
body.dark .home-info .button:hover{
  border-color: color-mix(in srgb, #ddd8d8 38%, transparent) !important;
  background: color-mix(in srgb, #ddd8d8 10%, transparent) !important;
  color: #ddd8d8 !important;
}

/* Cards */
.post-entry,
.first-entry,
.entry,
.archive-entry{
  background: transparent !important;
  border: 1px solid var(--nk-line) !important;
  border-radius: var(--nk-radius);
  box-shadow: none !important;
}
.post-entry:hover,
.entry:hover,
.archive-entry:hover{
  border-color: color-mix(in srgb, var(--nk-accent) 30%, transparent) !important;
}

/* Blockquotes */
.post-content blockquote{
  border-left: 4px solid var(--nk-accent);
  background: color-mix(in srgb, var(--nk-accent) 7%, transparent);
  border-radius: var(--nk-radius-sm);
  padding: .9rem 1rem;
  margin: 1.1rem 0;
  color: var(--nk-ink);
}
body.dark .post-content blockquote{
  border-left-color:#ddd8d8;
  background: color-mix(in srgb, #ddd8d8 8%, transparent);
}

/* Code */
.post-content code{
  font-family: var(--font-mono);
  font-size: .92em;
  background: color-mix(in srgb, var(--nk-ink) 6%, transparent);
  padding: .15em .4em;
  border-radius: 8px;
}
.post-content pre{
  border: 1px solid var(--nk-line);
  border-radius: var(--nk-radius);
  background: color-mix(in srgb, var(--nk-ink) 4%, transparent) !important;
  box-shadow: none !important;
  overflow: auto;
}
.post-content pre code{
  background: transparent !important;
  padding: 0 !important;
}

/* Tables */
.post-content table{
  border-collapse: separate;
  border-spacing: 0;
  border: 1px solid var(--nk-line);
  border-radius: var(--nk-radius);
  overflow: hidden;
}
.post-content th{
  background: color-mix(in srgb, var(--nk-ink) 5%, transparent);
  font-family: var(--font-heading);
  font-weight: 700;
}
.post-content td, .post-content th{
  border-bottom: 1px solid var(--nk-line);
}
.post-content tr:last-child td{
  border-bottom: none;
}

/* Social icons spacing */
.social-icons{ gap: .25rem; }

/* Nav active */
#menu a span.active{
  color: var(--nk-accent);
  font-weight: 800;
}
body.dark #menu a span.active{
  color:#ddd8d8;
}

/* Title spacing */
.single-title,
.post-title{
  margin-bottom: 2.2rem;
}

/* === Disable the editorial left rail ONLY on /contact/ === */
html:has(head link[rel="canonical"][href$="/contact/"]) .post-content{
  border-left: none !important;
  padding-left: 0 !important;
}

/* Also disable any rail-like left padding on the single page container */
html:has(head link[rel="canonical"][href$="/contact/"]) .post-single .post-content{
  border-left: none !important;
  padding-left: 0 !important;
}

/* =========================================================
   RESEARCH PAGE DESIGN — Option C
   Editorial Cards + Quiet Accent Rail
   (full replacement for rk-* scheme)
   ========================================================= */

   .rk-tl{
    --rk-accent: #7a0019; /* maroon */
    --rk-text: rgba(17,24,39,.92);
    --rk-muted: rgba(17,24,39,.62);
    --rk-border: rgba(17,24,39,.12);
  
    --rk-card: rgba(255,255,255,.75);
    --rk-card-strong: rgba(255,255,255,.92);
  
    margin: 2.25rem 0;
    display: flex;
    flex-direction: column;
    gap: 2.25rem;
    position: relative;
  }
  
  body.dark .rk-tl{
    --rk-text: rgba(255,255,255,.92);
    --rk-muted: rgba(255,255,255,.62);
    --rk-border: rgba(255,255,255,.16);
  
    --rk-card: rgba(15,18,22,.72);
    --rk-card-strong: rgba(15,18,22,.88);
  }
  
  /* 2-column grid */
  .rk-group{
    display: grid;
    grid-template-columns: 150px 1fr;
    gap: 1.35rem;
    align-items: start;
  }
  
  /* Year label — clean, editorial */
  .rk-year{
    font-size: 1.35rem;
    font-weight: 800;
    color: var(--rk-text);
    opacity: .92;
    text-align: right;
    padding-right: .9rem;
    position: relative;
    white-space: nowrap;
  }
  
  /* A subtle “guide line” on the year column */
  .rk-year::after{
    content:"";
    position: absolute;
    right: -2px;
    top: .25rem;
    bottom: .25rem;
    width: 2px;
    border-radius: 2px;
    background: color-mix(in srgb, var(--rk-accent) 25%, transparent);
  }
  
  body.dark .rk-year::after{
    background: color-mix(in srgb, #ddd8d8 22%, transparent);
  }
  
  /* Items column */
  .rk-items{
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }
  
  /* Card — crisp, no glass */
  .rk-item{
    position: relative;
    display: grid;
    grid-template-columns: auto 1fr;
    gap: 1rem;
    align-items: start;
  
    padding: 1.05rem 1.2rem;
    border-radius: 16px;
    border: 1px solid var(--rk-border);
    background: var(--rk-card);
  
    box-shadow: none;
    overflow: visible; /* safe */
  }
  
  /* Soft maroon stripe (editorial accent) */
  .rk-item::before{
    content:"";
    position: absolute;
    left: 0;
    top: 12px;
    bottom: 12px;
    width: 4px;
    border-radius: 999px;
    background: color-mix(in srgb, var(--rk-accent) 55%, transparent);
  }
  
  body.dark .rk-item::before{
    background: color-mix(in srgb, #ddd8d8 40%, transparent);
  }
  
  /* Tag chip — always subtle maroon tint, NO hover */
  .rk-tag{
    display: inline-flex;
    align-items: center;
    padding: .22rem .62rem;
    border-radius: 999px;
  
    background: color-mix(in srgb, var(--rk-accent) 10%, transparent);
    border: 1px solid color-mix(in srgb, var(--rk-accent) 40%, transparent);
  
    color: var(--rk-accent);
    font-weight: 700;
    font-size: .82rem;
    letter-spacing: .02em;
  
    box-shadow: none;
    transform: none;
    transition: none;
  }
  
  body.dark .rk-tag{
    background: color-mix(in srgb, #ddd8d8 10%, transparent);
    border-color: color-mix(in srgb, #ddd8d8 28%, transparent);
    color: #ddd8d8;
  }
  
  /* Title + meta */
  .rk-title{
    margin: .05rem 0 .25rem;
    font-size: 1.08rem;
    color: var(--rk-text);
  }
  
  .rk-meta{
    color: var(--rk-muted);
    font-size: .93rem;
  }
  
  /* Status */
  .rk-status{
    display: block;
    font-style: italic;
    font-weight: normal;
    font-size: .9em;
    color: var(--rk-muted);
    margin-top: .12rem;
  }
  
  /* Pills row */
  .rk-pills{
    display:flex;
    flex-wrap:wrap;
    gap:.45rem;
    margin-top:.55rem;
    align-items:center;
  }
  
  /* Pills — PaperMod-ish (subtle tint, no lift) */
  :root{ --rk-pill-h: 30px; }
  
  .rk-pill,
  .rk-details > summary{
    box-sizing: border-box !important;
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
    height: var(--rk-pill-h) !important;
    padding: 0 .65rem !important;
    border-radius: 999px;
  
    border: 1px solid var(--rk-border);
    background: transparent;
    color: var(--rk-text);
    font-size: .85rem;
    text-decoration: none;
    line-height: 1;
  
    transition: background .18s ease, border-color .18s ease, color .18s ease;
  }
  
  .rk-pill:hover,
  .rk-details > summary:hover{
    background: color-mix(in srgb, var(--rk-accent) 8%, transparent);
    border-color: color-mix(in srgb, var(--rk-accent) 35%, transparent);
    color: var(--rk-accent);
  }
  
  body.dark .rk-pill:hover,
  body.dark .rk-details > summary:hover{
    background: color-mix(in srgb, #ddd8d8 10%, transparent);
    border-color: color-mix(in srgb, #ddd8d8 30%, transparent);
    color: #ddd8d8;
  }
  
  /* Details (Abstract/Awards) */
  .rk-details{ display:block; max-width:100%; }
  .rk-details > summary{ list-style:none; cursor:pointer; user-select:none; }
  .rk-details > summary::-webkit-details-marker{ display:none; }
  .rk-details > summary::marker{ content:""; }
  
  .rk-details[open]{ flex-basis:100%; }
  .rk-details[open] > summary{
    background: color-mix(in srgb, var(--rk-accent) 10%, transparent);
    border-color: color-mix(in srgb, var(--rk-accent) 45%, transparent);
    color: var(--rk-accent);
    border-bottom-left-radius: 0;
    border-bottom-right-radius: 0;
  }
  
  body.dark .rk-details[open] > summary{
    background: color-mix(in srgb, #ddd8d8 10%, transparent);
    border-color: color-mix(in srgb, #ddd8d8 35%, transparent);
    color: #ddd8d8;
  }
  
  /* Attached panel */
  .rk-details[open] .rk-abstract,
  .rk-details[open] .rk-awards{
    display:block;
    width:100%;
    box-sizing:border-box;
    margin:0;
    padding:.9rem 1rem;
  
    background: var(--rk-card-strong);
    border: 1px solid color-mix(in srgb, var(--rk-accent) 35%, transparent);
    border-top: none;
  
    border-bottom-left-radius: 12px;
    border-bottom-right-radius: 12px;
  
    color: var(--rk-muted);
  }
  
  body.dark .rk-details[open] .rk-abstract,
  body.dark .rk-details[open] .rk-awards{
    border-color: color-mix(in srgb, #ddd8d8 26%, transparent);
    color: var(--rk-muted);
  }
  
  /* External pill icon (keep your style) */
  .rk-pill.rk-external{
    position: relative;
  }
  
  .rk-pill.rk-external::after{
    content:"";
    display:inline-block;
    width:1em;
    height:1em;
    margin-left:.2em;
    background: currentColor;
    mask: url('data:image/svg+xml;utf8,\<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>') no-repeat center / contain;
    -webkit-mask: url('data:image/svg+xml;utf8,\<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>') no-repeat center / contain;
  }
  
  /* Typography inside panels */
  .rk-abstract, .rk-awards{
    font-size: .88rem;
    line-height: 1.45;
  }
  .rk-abstract p, .rk-awards li{ margin:.4rem 0; }
  
  /* Responsive */
  @media (max-width:720px){
    .rk-group{ grid-template-columns:1fr; }
    .rk-year{
      text-align:left;
      padding-right:0;
      margin-bottom:.25rem;
    }
    .rk-year::after{ display:none; }
  }

  /* ================================
   REMOVE ALL RESEARCH RAIL LINES
   ================================ */

/* Remove year column rail */
.rk-year::after{
  display: none !important;
}

/* Remove card left accent stripe */
.rk-item::before{
  display: none !important;
}

/* =========================================================
   FIX: prevent global underline rules from touching the NAV
   (EDIT: stops collisions with the menu underline)
   ========================================================= */
#menu a::after{
  content: none !important;
}

/* =========================================================
   NAV MENU: animated underline on hover (PaperMod) — stable
   (EDIT: uses ::before instead of ::after)
   ========================================================= */
#menu a{
  position: relative;
  text-decoration: none !important;
}

#menu a::before{
  content:"";
  position: absolute;
  left: 0;
  bottom: -6px;              /* distance below text */
  width: 100%;
  height: 2.5px;
  background: var(--nk-accent);
  transform: scaleX(0);
  transform-origin: left;
  transition: transform .28s ease;
  pointer-events:none;
}

#menu a:hover::before{
  transform: scaleX(1);
}

/* Dark mode: creamy underline */
body.dark #menu a::before{
  background: #ddd8d8;
}

/* =========================================================
   Final typography polish:
   - Fix right-edge overflow in justified text
   - Slightly soften name weight ("Somjit Roy")
   ========================================================= */

/* 1) Prevent words from overflowing in justified text */
.post-content p,
.profile .profile_inner p,
.home-info p{
  text-align: justify;
  text-justify: inter-word;

  /* critical fixes */
  hyphens: auto;
  -webkit-hyphens: auto;
  -ms-hyphens: auto;

  overflow-wrap: break-word;
  word-wrap: break-word;
  word-break: normal;
}

@supports (-webkit-touch-callout: none) {
  .profile .profile__subtitle,
  .profile .profile__subtitle p,
  .profile-mode .profile__subtitle,
  .profile-mode .profile__subtitle p{
    text-align: left !important;
    text-align-last: auto !important;
    word-spacing: normal !important;
  }
}


/* Mobile: justification causes rivers → switch to left */
@media (max-width: 680px){
  .post-content p,
  .profile .profile_inner p,
  .home-info p{
    text-align: left;
    hyphens: none;
  }
}

/* 2) Inline links: subtle emphasis, not heavy */
.post-content a:not(.button):not(:has(svg)),
.profile .profile_inner a:not(.button):not(:has(svg)),
.home-info a:not(.button):not(:has(svg)){
  font-weight: 520;
}

/* Dark mode: slightly lighter still */
body.dark .post-content a:not(.button):not(:has(svg)),
body.dark .profile .profile_inner a:not(.button):not(:has(svg)),
body.dark .home-info a:not(.button):not(:has(svg)){
  font-weight: 500;
}

/* 3) Author name ("Somjit Roy") — reduce boldness ONLY */
.logo a,
.site-title,
.header .logo a{
  font-weight: 520 !important;
}

/* =========================================================
   Bio: center the text block + keep it from running too wide
   (prevents right-edge overflow on long words/links)
   ========================================================= */

/* Center the bio “about” paragraph block and cap its width */
.profile .profile_inner{
  max-width: 68ch;
  margin-left: auto;
  margin-right: auto;
}

/* Make the bio text use a safe wrapping strategy */
.profile .profile_inner p{
  text-align: left;
  overflow-wrap: anywhere;
  word-break: normal;
  hyphens: auto;
  -webkit-hyphens: auto;
}

/* If you still prefer “even edges”, use soft justification without overflow */
@media (min-width: 860px){
  .profile .profile_inner p{
    text-align: justify;
    text-justify: inter-word;
  }
}

/* Keep inline links from forcing overflow */
.profile .profile_inner a{
  overflow-wrap: anywhere;
}

/* Optional: slightly tighter line-length on very wide screens */
@media (min-width: 1200px){
  .profile .profile_inner{
    max-width: 64ch;
  }
}

/* =========================================================
   FIX: Research glass cards/shadows getting clipped
   ========================================================= */
   .post-content .rk-tl,
   .post-content .rk-group,
   .post-content .rk-items,
   .post-content .rk-item,
   .post-content .rk-details,
   .post-content .rk-details[open] .rk-abstract,
   .post-content .rk-details[open] .rk-awards{
     overflow: visible !important;
   }
   
   /* Allow shadows to breathe at edges */
   .post-content .rk-tl{
     padding: .25rem 0 .5rem;
   }

   .post-single .post-content:has(.rk-tl){
    overflow: visible !important;
  }

  /* =========================================================
   Disable editorial side rail on /research/
   ========================================================= */
html:has(head link[rel="canonical"][href$="/research/"]) .post-content{
  border-left: none !important;
  padding-left: 0 !important;
}

/* Extra safety: remove any inherited padding inside */
html:has(head link[rel="canonical"][href$="/research/"]) .post-single .post-content{
  border-left: none !important;
  padding-left: 0 !important;
}

/* ---- */

/* =========================================================
   FANCY PACK (CSS-only)
   Paste at END of custom.css
   ========================================================= */

/* ---------- 0) Gentle site-wide smoothing ---------- */
:root{
  --nk-shadow: 0 10px 30px rgba(17,24,39,.06);
  --nk-shadow-sm: 0 8px 18px rgba(17,24,39,.07);
}
body.dark{
  --nk-shadow: 0 10px 30px rgba(0,0,0,.35);
  --nk-shadow-sm: 0 8px 18px rgba(0,0,0,.30);
}

/* ---------- 1) “Ink” hover for cards: soft lift + glow ---------- */
.post-entry,
.first-entry,
.entry,
.archive-entry{
  transition: transform .16s ease, box-shadow .18s ease, border-color .18s ease;
}
.post-entry:hover,
.entry:hover,
.archive-entry:hover{
  transform: translateY(-2px);
  box-shadow: var(--nk-shadow);
  border-color: color-mix(in srgb, var(--nk-accent) 24%, transparent) !important;
}
body.dark .post-entry:hover,
body.dark .entry:hover,
body.dark .archive-entry:hover{
  box-shadow: var(--nk-shadow);
  border-color: color-mix(in srgb, #ddd8d8 22%, transparent) !important;
}

/* ---------- 2) Title hover polish (like a journal) ---------- */
.post-entry .entry-header h2,
.post-entry .entry-header h1{
  transition: letter-spacing .18s ease, color .18s ease;
}
.post-entry:hover .entry-header h2,
.post-entry:hover .entry-header h1{
  letter-spacing: -0.018em;
  color: var(--nk-accent);
}
body.dark .post-entry:hover .entry-header h2,
body.dark .post-entry:hover .entry-header h1{
  color: #ddd8d8;
}

/* ---------- 3) Fancy selection highlight (text selection) ---------- */
::selection{
  background: color-mix(in srgb, var(--nk-accent) 26%, transparent);
}
body.dark ::selection{
  background: color-mix(in srgb, #ddd8d8 22%, transparent);
}

/* ---------- 4) “Magazine” rule under H1 on single pages ---------- */
.post-single .post-title{
  position: relative;
  padding-bottom: .65rem;
}
.post-single .post-title::after{
  content:"";
  display:block;
  height: 2px;
  width: 96px;
  margin-top: .65rem;
  border-radius: 999px;
  background: linear-gradient(
    90deg,
    color-mix(in srgb, var(--nk-accent) 70%, transparent),
    color-mix(in srgb, var(--nk-accent) 18%, transparent)
  );
}
body.dark .post-single .post-title::after{
  background: linear-gradient(
    90deg,
    color-mix(in srgb, #ddd8d8 70%, transparent),
    color-mix(in srgb, #ddd8d8 18%, transparent)
  );
}

/* ---------- 5) Better inline code (less “blocky”, more premium) ---------- */
.post-content :not(pre) > code{
  border: 1px solid color-mix(in srgb, var(--nk-line) 70%, transparent);
  background: color-mix(in srgb, var(--nk-ink) 4%, transparent);
  padding: .16em .45em;
  border-radius: 999px;
}
body.dark .post-content :not(pre) > code{
  border-color: color-mix(in srgb, var(--nk-line) 85%, transparent);
  background: color-mix(in srgb, #fff 6%, transparent);
}

/* ---------- 6) Pre blocks: subtle top bar (terminal vibe) ---------- */
.post-content pre{
  position: relative;
  padding-top: 1.15rem; /* makes room for bar */
}
.post-content pre::before{
  content:"";
  position:absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 10px;
  border-top-left-radius: var(--nk-radius);
  border-top-right-radius: var(--nk-radius);
  background: color-mix(in srgb, var(--nk-ink) 6%, transparent);
}
body.dark .post-content pre::before{
  background: color-mix(in srgb, #fff 7%, transparent);
}

/* ---------- 7) Images: soft frame + gentle hover ---------- */
.post-content img{
  border-radius: 16px;
  border: 1px solid var(--nk-line);
  box-shadow: none;
  transition: transform .18s ease, box-shadow .18s ease;
}
.post-content img:hover{
  transform: translateY(-1px);
  box-shadow: var(--nk-shadow-sm);
}

/* ---------- 8) Tables: modern zebra rows + sticky header ---------- */
.post-content table{
  width: 100%;
}
.post-content thead th{
  position: sticky;
  top: 0;
  z-index: 1;
}
.post-content tbody tr:nth-child(odd){
  background: color-mix(in srgb, var(--nk-ink) 2.2%, transparent);
}
body.dark .post-content tbody tr:nth-child(odd){
  background: color-mix(in srgb, #fff 3.2%, transparent);
}

/* ---------- 9) TOC: make it feel like a “side note” ---------- */
.toc{
  border: 1px solid var(--nk-line) !important;
  border-radius: var(--nk-radius) !important;
  padding: .9rem 1rem !important;
  background: color-mix(in srgb, var(--nk-ink) 2.5%, transparent) !important;
}
body.dark .toc{
  background: color-mix(in srgb, #fff 4.5%, transparent) !important;
}
.toc a{
  font-weight: 560;
}

/* ---------- 10) Smooth interactions for users who allow motion ---------- */
@media (prefers-reduced-motion: no-preference){
  html{ scroll-behavior: smooth; }
}

/* =========================================================
   === ADD-ON: Fancy upgrades (append at END of custom.css) ===
   Keep your existing CSS unchanged above this block.
   ========================================================= */

/* 1) Paper grain background (very subtle) */
body{
  background-image:
    radial-gradient(rgba(17,24,39,.018) 1px, transparent 1px),
    radial-gradient(rgba(17,24,39,.010) 1px, transparent 1px);
  background-position: 0 0, 18px 18px;
  background-size: 36px 36px;
}
body.dark{
  background-image:
    radial-gradient(rgba(255,255,255,.015) 1px, transparent 1px),
    radial-gradient(rgba(255,255,255,.008) 1px, transparent 1px);
}

/* 2) “Luxury” nav: pill hover + active highlight */
#menu a{
  padding: .35rem .6rem;
  border-radius: 999px;
  transition: background .18s ease, transform .18s ease;
}
#menu a:hover{
  background: color-mix(in srgb, var(--nk-accent) 10%, transparent);
  transform: translateY(-1px);
}
body.dark #menu a:hover{
  background: color-mix(in srgb, #ddd8d8 10%, transparent);
}
#menu a span.active{
  padding: .15rem .25rem;
  border-radius: 999px;
  background: color-mix(in srgb, var(--nk-accent) 12%, transparent);
}
body.dark #menu a span.active{
  background: color-mix(in srgb, #ddd8d8 12%, transparent);
}

/* 3) Upgrade underline to “ink-stroke” gradient (keeps your animation) */
.profile-mode a:not(:has(svg)):not(.button)::after,
.profile a:not(:has(svg)):not(.button)::after,
.home-info a:not(:has(svg)):not(.button)::after,
#profile a:not(:has(svg)):not(.button)::after,
.post-content a:not(:has(svg)):not(.button)::after,
.post-entry a:not(:has(svg)):not(.button)::after{
  height: 2.5px;
  border-radius: 999px;
  background: linear-gradient(
    90deg,
    color-mix(in srgb, var(--nk-accent) 75%, transparent),
    color-mix(in srgb, var(--nk-accent) 20%, transparent)
  );
}
body.dark .profile-mode a:not(:has(svg)):not(.button)::after,
body.dark .profile a:not(:has(svg)):not(.button)::after,
body.dark .home-info a:not(:has(svg)):not(.button)::after,
body.dark #profile a:not(:has(svg)):not(.button)::after,
body.dark .post-content a:not(:has(svg)):not(.button)::after,
body.dark .post-entry a:not(:has(svg)):not(.button)::after{
  background: linear-gradient(
    90deg,
    color-mix(in srgb, #ddd8d8 75%, transparent),
    color-mix(in srgb, #ddd8d8 20%, transparent)
  );
}

/* 4) Section markers for H2 (journal-style) */
.post-content h2{
  position: relative;
  padding-left: .2rem;
}
.post-content h2::before{
  content:"";
  position:absolute;
  left: -1.05rem;
  top: .55em;
  width: .5rem;
  height: .5rem;
  border-radius: 999px;
  background: color-mix(in srgb, var(--nk-accent) 65%, transparent);
}
body.dark .post-content h2::before{
  background: color-mix(in srgb, #ddd8d8 60%, transparent);
}
@media (max-width: 680px){
  .post-content h2::before{ display:none; }
}

/* 5) “Glassy” research tags (rk-tag) */
.rk-tag{
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  background: color-mix(in srgb, var(--rk-accent) 12%, rgba(255,255,255,.55));
}
body.dark .rk-tag{
  background: color-mix(in srgb, #ddd8d8 10%, rgba(10,12,16,.45));
}

/* 6) Paragraph rhythm on single pages (subtle dividers) */
.post-single .post-content p + p{
  margin-top: 1.05rem;
}
.post-single .post-content p + p::before{
  content:"";
  display:block;
  height: 1px;
  width: 40px;
  margin: .25rem 0 .85rem;
  background: color-mix(in srgb, var(--nk-line) 85%, transparent);
  border-radius: 999px;
}

/* 7) Blockquote watermark (extra classy) */
.post-content blockquote{
  position: relative;
  overflow: hidden;
}
.post-content blockquote::after{
  content:"“";
  position:absolute;
  right: 14px;
  top: -10px;
  font-size: 5rem;
  font-weight: 800;
  opacity: .10;
  color: var(--nk-accent);
  pointer-events:none;
}
body.dark .post-content blockquote::after{
  color:#ddd8d8;
  opacity: .10;
}

/* 8) Refined list bullets (footnote-style) */
.post-content ul{
  list-style: none;
  padding-left: 1.1rem;
}
.post-content ul li{
  position: relative;
  margin: .45rem 0;
}
.post-content ul li::before{
  content:"";
  position:absolute;
  left: -1.05rem;
  top: .62em;
  width: .38rem;
  height: .38rem;
  border-radius: 999px;
  background: color-mix(in srgb, var(--nk-accent) 55%, transparent);
}
body.dark .post-content ul li::before{
  background: color-mix(in srgb, #ddd8d8 52%, transparent);
}

/* 9) Optional: smoother in-page navigation */
@media (prefers-reduced-motion: no-preference){
  html{ scroll-behavior: smooth; }
}

/* =========================================================
   UPDATES (from Research blurb hover + News styling + Research hover cards)
   Paste at END of custom.css
   ========================================================= */

/* ---------------------------------------------------------
   0) Shared “ink-stroke” gradient (matches your underline)
   --------------------------------------------------------- */
   :root{
    --nk-inkgrad: linear-gradient(
      90deg,
      color-mix(in srgb, var(--nk-accent) 75%, transparent),
      color-mix(in srgb, var(--nk-accent) 20%, transparent)
    );
  }
  body.dark{
    --nk-inkgrad: linear-gradient(
      90deg,
      color-mix(in srgb, #ddd8d8 75%, transparent),
      color-mix(in srgb, #ddd8d8 20%, transparent)
    );
  }
  
  /* =========================================================
     1) RESEARCH BLURB — fancy border (same gradient) + hover
     Requires your blurb wrapper like: <div class="rk-intro">...</div>
     ========================================================= */
  html:has(head link[rel="canonical"][href$="/research/"]) .rk-intro{
    position: relative;
    border: none !important;
    border-radius: 16px;
    padding: 1.05rem 1.15rem;
    background: color-mix(in srgb, var(--nk-paper) 92%, white);
    box-shadow: none;
    transition: transform .16s ease, box-shadow .18s ease;
    overflow: hidden;
  }
  
  html:has(head link[rel="canonical"][href$="/research/"]) .rk-intro::before{
    content:"";
    position:absolute;
    inset:0;
    padding: 2px;
    border-radius: inherit;
    background: var(--nk-inkgrad);
    -webkit-mask:
      linear-gradient(#000 0 0) content-box,
      linear-gradient(#000 0 0);
    -webkit-mask-composite: xor;
            mask-composite: exclude;
    pointer-events:none;
  }
  
  html:has(head link[rel="canonical"][href$="/research/"]) .rk-intro > *{
    position: relative;
    z-index: 1;
  }
  
  html:has(head link[rel="canonical"][href$="/research/"]) .rk-intro:hover{
    transform: translateY(-2px);
    box-shadow: var(--nk-shadow, 0 10px 30px rgba(17,24,39,.06));
  }
  
  /* =========================================================
   RESEARCH — entrance animation (page load)
   Matches CONTACT page animation exactly
   ========================================================= */

/* Target the research blurb */
html:has(head link[rel="canonical"][href*="/research"])
.rk-blurb,
html:has(head link[rel="canonical"][href*="/research"])
.research-blurb,
html:has(head link[rel="canonical"][href*="/research"])
.post-content > p:first-of-type{
  opacity: 0;
  transform: translateY(10px) scale(.985);
  animation: rk-in .85s ease-out forwards;
  animation-delay: .06s;
  will-change: opacity, transform;
}

/* Same keyframes as CONTACT */
@keyframes rk-in{
  from{
    opacity: 0;
    transform: translateY(10px) scale(.985);
  }
  to{
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

/* Reduced motion accessibility */
@media (prefers-reduced-motion: reduce){
  html:has(head link[rel="canonical"][href*="/research"])
  .rk-blurb,
  html:has(head link[rel="canonical"][href*="/research"])
  .research-blurb,
  html:has(head link[rel="canonical"][href*="/research"])
  .post-content > p:first-of-type{
    animation: none !important;
    opacity: 1 !important;
    transform: none !important;
  }
}

  /* =========================================================
     2) RESEARCH CARDS — same gradient border + hover lift
     ========================================================= */
  html:has(head link[rel="canonical"][href$="/research/"]) .rk-item{
    position: relative;
    border: none !important;
    border-radius: 16px;
    overflow: hidden;
    transition: transform .16s ease, box-shadow .18s ease;
  }
  
  html:has(head link[rel="canonical"][href$="/research/"]) .rk-item::before{
    content:"";
    position:absolute;
    inset:0;
    padding: 2px;
    border-radius: inherit;
    background: var(--nk-inkgrad);
    -webkit-mask:
      linear-gradient(#000 0 0) content-box,
      linear-gradient(#000 0 0);
    -webkit-mask-composite: xor;
            mask-composite: exclude;
    pointer-events:none;
  }
  
  html:has(head link[rel="canonical"][href$="/research/"]) .rk-item > *{
    position: relative;
    z-index: 1;
  }
  
  html:has(head link[rel="canonical"][href$="/research/"]) .rk-item:hover{
    transform: translateY(-2px);
    box-shadow: var(--nk-shadow, 0 10px 30px rgba(17,24,39,.06));
  }
  
  /* Optional: keep pills from looking clipped inside bordered cards */
  html:has(head link[rel="canonical"][href$="/research/"]) .rk-pills{
    margin-top: .65rem;
  }
  
  /* =========================================================
     3) NEWS PAGE — no side rail, no bullets, matches site style
     Applies only on /news/
     ========================================================= */
  
  /* Turn OFF your global editorial left rail only on /news/ */
  html:has(head link[rel="canonical"][href$="/news/"]) .post-content{
    border-left: none !important;
    padding-left: 0 !important;
  }
  
  /* News container */
  html:has(head link[rel="canonical"][href$="/news/"]) .ns-accord{
    --ns-accent: var(--nk-accent);
    --ns-muted: color-mix(in srgb, currentColor 60%, transparent);
    font-size: 1.02rem;
    line-height: 1.5;
    margin-top: .75rem;
  }
  
  /* Year block — clean, no rails */
  html:has(head link[rel="canonical"][href$="/news/"]) details.ns-year{
    border: none !important;
    background: transparent !important;
    margin: 0 0 1.05rem !important;
    padding: 0 !important;
  }
  
  /* Year header */
  html:has(head link[rel="canonical"][href$="/news/"]) details.ns-year > summary{
    list-style: none;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: .5rem;
    padding: .25rem .5rem;
    border-radius: 999px;
    transition: background .18s ease, transform .18s ease;
  }
  html:has(head link[rel="canonical"][href$="/news/"]) details.ns-year > summary::-webkit-details-marker{
    display:none;
  }
  
  /* Hover on year summary: same soft “ink” effect */
  html:has(head link[rel="canonical"][href$="/news/"]) details.ns-year > summary:hover{
    background: color-mix(in srgb, var(--nk-accent) 10%, transparent);
    transform: translateY(-1px);
  }
  body.dark
  html:has(head link[rel="canonical"][href$="/news/"]) details.ns-year > summary:hover{
    background: color-mix(in srgb, #ddd8d8 10%, transparent);
  }
  
  /* Year label */
  html:has(head link[rel="canonical"][href$="/news/"]) .ns-yearlabel{
    font-weight: 850;
    font-size: 1.25rem;
    letter-spacing: .02em;
    color: var(--ns-accent);
  }
  body.dark
  html:has(head link[rel="canonical"][href$="/news/"]) .ns-yearlabel{
    color: #ddd8d8;
  }
  
  /* NO bullets, NO rail — use card rows instead */
  html:has(head link[rel="canonical"][href$="/news/"]) .ns-list{
    list-style: none !important;
    padding: 0 !important;
    margin: .6rem 0 0 !important;
  }
  html:has(head link[rel="canonical"][href$="/news/"]) .ns-list::before,
  html:has(head link[rel="canonical"][href$="/news/"]) .ns-list li::before{
    content: none !important; /* kills rail + dots */
  }
  
  /* Each news row as a “mini card” */
  html:has(head link[rel="canonical"][href$="/news/"]) .ns-list li{
    display: grid;
    grid-template-columns: 52px 1fr;
    gap: .75rem;
    align-items: start;
    padding: .75rem .9rem;
    margin: .6rem 0;
    border-radius: 14px;
    border: 1px solid var(--nk-line);
    background: color-mix(in srgb, var(--nk-paper) 92%, white);
    transition: transform .16s ease, box-shadow .18s ease, border-color .18s ease;
  }
  
  /* Hover: same style feel as research cards */
  html:has(head link[rel="canonical"][href$="/news/"]) .ns-list li:hover{
    transform: translateY(-2px);
    box-shadow: var(--nk-shadow, 0 10px 30px rgba(17,24,39,.06));
    border-color: color-mix(in srgb, var(--nk-accent) 24%, transparent);
  }
  body.dark
  html:has(head link[rel="canonical"][href$="/news/"]) .ns-list li:hover{
    border-color: color-mix(in srgb, #ddd8d8 22%, transparent);
  }
  
  /* Month column */
  html:has(head link[rel="canonical"][href$="/news/"]) .ns-month{
    text-align: right;
    font-variant-numeric: tabular-nums;
    font-weight: 700;
    color: color-mix(in srgb, currentColor 60%, transparent);
    padding-top: .05rem;
  }
  
  /* Body text */
  html:has(head link[rel="canonical"][href$="/news/"]) .ns-body{
    color: color-mix(in srgb, currentColor 86%, transparent);
  }
  
  /* Links inside news: match your underline animation (no double underline) */
  html:has(head link[rel="canonical"][href$="/news/"]) .ns-body a{
    color: inherit;
    text-decoration: none !important;
    position: relative;
    display: inline-block;
    padding-bottom: 2px;
  }
  html:has(head link[rel="canonical"][href$="/news/"]) .ns-body a::after{
    content:"";
    position:absolute;
    left:0;
    bottom:-2px;
    width:100%;
    height:2.5px;
    border-radius: 999px;
    background: var(--nk-inkgrad);
    transform: scaleX(0);
    transform-origin: left;
    transition: transform .25s ease;
    pointer-events:none;
  }
  html:has(head link[rel="canonical"][href$="/news/"]) .ns-body a:hover{
    color: var(--nk-accent);
  }
  body.dark
  html:has(head link[rel="canonical"][href$="/news/"]) .ns-body a:hover{
    color: #ddd8d8;
  }
  html:has(head link[rel="canonical"][href$="/news/"]) .ns-body a:hover::after{
    transform: scaleX(1);
  }
  
  /* Mobile tweaks */
  @media (max-width:680px){
    html:has(head link[rel="canonical"][href$="/news/"]) .ns-list li{
      grid-template-columns: 44px 1fr;
      padding: .7rem .8rem;
    }
  }

  /* =========================================================
   NEWS — year chevron: one-time entrance animation
   Matches Awards ring affordance language
   ========================================================= */

/* Base chevron (ensure transform origin is clean) */
.post-content details.ns-year > summary::after{
  transform-origin: center;
  will-change: transform, opacity;
}

/* Animate ONCE when page loads */
.post-content details.ns-year > summary::after{
  animation: nk-news-chevron-in 0.85s ease-out .25s both;
}

/* Closed state rotation preserved */
.post-content details.ns-year:not([open]) > summary::after{
  transform: rotate(-90deg);
}

/* Open state rotation preserved */
.post-content details.ns-year[open] > summary::after{
  transform: rotate(90deg);
}

/* Entrance animation */
@keyframes nk-news-chevron-in{
  from{
    opacity: 0;
    transform: translateX(-4px) scale(.6) rotate(-90deg);
  }
  to{
    opacity: .85;
    transform: translateX(0) scale(1) rotate(-90deg);
  }
}

/* Hover emphasis (unchanged behavior, just smoother) */
.post-content details.ns-year > summary:hover::after{
  opacity: 1;
  transform: scale(1.05)
             rotate(var(--_chev-rot, -90deg));
}

/* Dark mode color parity */
body.dark .post-content details.ns-year > summary::after{
  color: #ddd8d8;
}

/* =========================================================
   NEWS — card entrance animation (once on page load)
   Matches Research cards & Awards ring
   ========================================================= */

/* Initial hidden state */
html:has(head link[rel="canonical"][href$="/news/"])
.ns-list li{
  opacity: 0;
  transform: translateY(10px) scale(.985);
  animation: nk-news-card-in 0.85s ease-out forwards;
}

/* Elegant stagger (top to bottom) */
html:has(head link[rel="canonical"][href$="/news/"])
.ns-list li:nth-child(1){ animation-delay: .06s; }
html:has(head link[rel="canonical"][href$="/news/"])
.ns-list li:nth-child(2){ animation-delay: .12s; }
html:has(head link[rel="canonical"][href$="/news/"])
.ns-list li:nth-child(3){ animation-delay: .18s; }
html:has(head link[rel="canonical"][href$="/news/"])
.ns-list li:nth-child(4){ animation-delay: .24s; }
html:has(head link[rel="canonical"][href$="/news/"])
.ns-list li:nth-child(5){ animation-delay: .30s; }
html:has(head link[rel="canonical"][href$="/news/"])
.ns-list li:nth-child(6){ animation-delay: .36s; }

/* Entrance animation */
@keyframes nk-news-card-in{
  from{
    opacity: 0;
    transform: translateY(10px) scale(.985);
  }
  to{
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

/* Respect reduced-motion preferences */
@media (prefers-reduced-motion: reduce){
  html:has(head link[rel="canonical"][href$="/news/"])
  .ns-list li{
    animation: none !important;
    opacity: 1 !important;
    transform: none !important;
  }
}



  /* =========================================================
   RESEARCH CARDS — match NEWS cards
   Same border color, same hover lift, same visual language
   ========================================================= */

/* Base research card = same as news card */
html:has(head link[rel="canonical"][href$="/research/"]) .rk-item{
  position: relative;
  border-radius: 14px;                  /* same as news */
  border: 1px solid var(--nk-line) !important;
  background: color-mix(in srgb, var(--nk-paper) 92%, white);
  box-shadow: none;
  overflow: hidden;

  transition:
    transform .16s ease,
    box-shadow .18s ease,
    border-color .18s ease;
}

/* Kill any older decorative borders / rails */
html:has(head link[rel="canonical"][href$="/research/"]) .rk-item::before,
html:has(head link[rel="canonical"][href$="/research/"]) .rk-item::after{
  content: none !important;
  display: none !important;
}

/* Hover = identical to news card hover */
html:has(head link[rel="canonical"][href$="/research/"]) .rk-item:hover{
  transform: translateY(-2px);
  box-shadow: var(--nk-shadow, 0 10px 30px rgba(17,24,39,.06));
  border-color: color-mix(in srgb, var(--nk-accent) 24%, transparent) !important;
}

/* Dark mode parity */
body.dark
html:has(head link[rel="canonical"][href$="/research/"]) .rk-item{
  background: color-mix(in srgb, var(--nk-paper) 88%, black);
}

body.dark
html:has(head link[rel="canonical"][href$="/research/"]) .rk-item:hover{
  border-color: color-mix(in srgb, #ddd8d8 22%, transparent) !important;
}

/* Slight spacing polish inside cards */
html:has(head link[rel="canonical"][href$="/research/"]) .rk-body{
  padding: .05rem 0;
}

/* Pills sit comfortably inside the card */
html:has(head link[rel="canonical"][href$="/research/"]) .rk-pills{
  margin-top: .6rem;
}


/* =========================================================
   RESEARCH — card entrance animation (once on page load)
   Matches Awards ring & News chevron affordance language
   ========================================================= */

/* Initial hidden state */
html:has(head link[rel="canonical"][href$="/research/"])
.rk-item{
  opacity: 0;
  transform: translateY(10px) scale(.985);
  animation: nk-research-card-in 0.85s ease-out forwards;
}

/* Stagger cards slightly for elegance */
html:has(head link[rel="canonical"][href$="/research/"])
.rk-item:nth-of-type(1){ animation-delay: .05s; }
html:has(head link[rel="canonical"][href$="/research/"])
.rk-item:nth-of-type(2){ animation-delay: .12s; }
html:has(head link[rel="canonical"][href$="/research/"])
.rk-item:nth-of-type(3){ animation-delay: .19s; }
html:has(head link[rel="canonical"][href$="/research/"])
.rk-item:nth-of-type(4){ animation-delay: .26s; }
html:has(head link[rel="canonical"][href$="/research/"])
.rk-item:nth-of-type(5){ animation-delay: .33s; }

/* Entrance animation */
@keyframes nk-research-card-in{
  from{
    opacity: 0;
    transform: translateY(10px) scale(.985);
  }
  to{
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

/* Respect reduced-motion users */
@media (prefers-reduced-motion: reduce){
  html:has(head link[rel="canonical"][href$="/research/"])
  .rk-item{
    animation: none !important;
    opacity: 1 !important;
    transform: none !important;
  }
}


/* =========================================================
   NEWS (ns-accord): clear "click to expand" affordance
   - adds chevron
   - adds "Click to expand" hint when closed
   - hint is bold + underlined in your accent color
   - underline uses same accent tone as your hover underline animation
   ========================================================= */

/* 0) Ensure the year summary is visually clickable */
.post-content .ns-accord details.ns-year > summary{
  position: relative;
  cursor: pointer;
  user-select: none;
  padding: .35rem 2.0rem .35rem 0;   /* room for chevron */
  border-radius: 12px;
  transition: background .18s ease, transform .18s ease;
}

/* subtle hover */
.post-content .ns-accord details.ns-year > summary:hover{
  background: color-mix(in srgb, var(--nk-accent, #500000) 6%, transparent);
  transform: translateY(-1px);
}
body.dark .post-content .ns-accord details.ns-year > summary:hover{
  background: color-mix(in srgb, #ddd8d8 8%, transparent);
}

/* 1) Chevron indicator (always visible) */
.post-content .ns-accord details.ns-year > summary::after{
  content:"▾";
  position:absolute;
  right: .25rem;
  top: 50%;
  transform: translateY(-52%) rotate(0deg);
  font-size: 1.05rem;
  font-weight: 900;
  color: var(--ns-accent);
  opacity: .85;
  transition: transform .22s ease, opacity .22s ease;
}
.post-content .ns-accord details.ns-year:not([open]) > summary::after{
  transform: translateY(-52%) rotate(-90deg);
  opacity: .75;
}

/* 2) "Click to expand" hint when CLOSED */
.post-content .ns-accord details.ns-year:not([open]) .ns-yearlabel{
  position: relative;
  padding-right: .35rem;
}

/* Hint text (shown only when closed) */
.post-content .ns-accord details.ns-year:not([open]) .ns-yearlabel::after{
  content:" ";
  font-weight: 800;
  opacity: .85;
  margin-left: .35rem;

  /* underline in same accent color as your hover underline animation */
  text-decoration-line: underline;
  text-decoration-thickness: 2.5px;
  text-underline-offset: 5px;
  text-decoration-color: var(--nk-accent, #500000);

  color: var(--nk-accent, #500000);
}

/* Dark mode hint */
body.dark .post-content .ns-accord details.ns-year:not([open]) .ns-yearlabel::after{
  color: #ddd8d8;
  text-decoration-color: #ddd8d8;
}

/* 3) When OPEN, keep label clean (no hint underline) */
.post-content .ns-accord details.ns-year[open] .ns-yearlabel::after{
  content: none !important;
}

/* 4) Make the year itself feel "active" on hover */
.post-content .ns-accord details.ns-year > summary:hover .ns-yearlabel{
  color: var(--nk-accent, #500000);
}
body.dark .post-content .ns-accord details.ns-year > summary:hover .ns-yearlabel{
  color: #ddd8d8;
}


/* =========================================================
   NEWS FIXES
   1) Bold ONLY hyperlink text inside news cards
   2) Keep hover underline color/effect
   3) Remove "[open]" text and replace with a small symbol
   ========================================================= */


/* ---------- 1) Bold hyperlinks, keep hover underline behavior ---------- */
.post-content .ns-body a,
.post-content .ns-body a:link,
.post-content .ns-body a:visited{
  font-weight: 750 !important;            /* bold hyperlink text only */
  color: var(--ns-accent) !important;     /* keep the same accent color */
  text-decoration: none !important;
  border-bottom: none !important;
  padding-bottom: 2px;
  position: relative;
}

/* underline matches your hover animation color (uses same accent) */
.post-content .ns-body a::after{
  content:"";
  position:absolute;
  left:0;
  bottom:-2px;
  width:100%;
  height:2.5px;
  border-radius:999px;
  background: var(--ns-accent);
  transform: scaleX(0);
  transform-origin: left;
  transition: transform .25s ease;
  pointer-events:none;
}

.post-content .ns-body a:hover::after{
  transform: scaleX(1);
}

.post-content .ns-body a:hover{
  color: var(--ns-accent) !important;     /* stays same color on hover */
}

/* dark mode accent stays creamy */
body.dark .post-content .ns-body a::after{
  background: #ddd8d8;
}
body.dark .post-content .ns-body a,
body.dark .post-content .ns-body a:hover{
  color: #ddd8d8 !important;
}


/* ---------- 2) Remove the "[open]" text completely ---------- */
.post-content .ns-openhint{
  display: none !important;
}


/* ---------- 3) Add a small expand/collapse symbol next to year ---------- */
/* Ensure summary aligns nicely */
.post-content details.ns-year > summary{
  display: inline-flex !important;
  align-items: center !important;
  gap: .55rem !important;                 /* spacing from year label */
  cursor: pointer;
}

/* Small symbol (chevron) */
.post-content details.ns-year > summary::after{
  content: "›";                           /* small, clean symbol */
  display: inline-block;
  font-size: .95em;
  opacity: .55;
  transform: rotate(0deg) translateY(1px);
  transition: transform .22s ease, opacity .22s ease;
  color: var(--ns-accent);
}

/* Open state rotates down */
.post-content details.ns-year[open] > summary::after{
  transform: rotate(90deg) translateY(1px);
  opacity: .85;
}

/* Hover makes it slightly clearer */
.post-content details.ns-year > summary:hover::after{
  opacity: 1;
}

/* Dark mode symbol */
body.dark .post-content details.ns-year > summary::after{
  color: #ddd8d8;
}

/* =========================================================
   NEWS: inline hyperlinks match ABOUT-page underline pattern
   - uses background-size animation (not ::after)
   - bold links only
   - kills older ns-body a::after rules
   ========================================================= */

   html:has(head link[rel="canonical"][href$="/news/"]) .ns-body a{
    display: inline;
    position: relative;
    text-decoration: none !important;
    color: inherit !important;
  
    /* bold only for links */
    font-weight: 750 !important;
  
    /* same underline "gap" strategy as About */
    padding-bottom: 3px;
    background-origin: content-box;
  
    /* same animated underline (light mode) */
    background-image: linear-gradient(var(--nk-accent, #500000), var(--nk-accent, #500000));
    background-repeat: no-repeat;
    background-position: 0 118%;
    background-size: 0% 2.4px;
  
    transition: background-size .30s ease, color .18s ease;
  }
  
  html:has(head link[rel="canonical"][href$="/news/"]) .ns-body a:hover{
    background-size: 100% 2.4px;
    color: var(--nk-accent, #500000) !important;
  }
  
  /* Prevent double underline from your earlier News rules */
  html:has(head link[rel="canonical"][href$="/news/"]) .ns-body a::after{
    content: none !important;
  }
  
  /* Dark mode matches About: creamy underline + hover color */
  body.dark html:has(head link[rel="canonical"][href$="/news/"]) .ns-body a{
    background-image: linear-gradient(#ddd8d8, #ddd8d8);
  }
  
  body.dark html:has(head link[rel="canonical"][href$="/news/"]) .ns-body a:hover{
    color: #ddd8d8 !important;
  }
  
  /* =========================================================
   NEWS: kill any legacy underline + use SAME gradient underline
   as About-page hover animation
   (paste at VERY END of custom.css)
   ========================================================= */

/* Define the exact "ink-stroke" gradient used elsewhere (safe if already defined) */
:root{
  --nk-inkgrad: linear-gradient(
    90deg,
    color-mix(in srgb, var(--nk-accent) 75%, transparent),
    color-mix(in srgb, var(--nk-accent) 20%, transparent)
  );
}
body.dark{
  --nk-inkgrad: linear-gradient(
    90deg,
    color-mix(in srgb, #ddd8d8 75%, transparent),
    color-mix(in srgb, #ddd8d8 20%, transparent)
  );
}

/* Force NEWS links to use background-underline (no purple border/decoration) */
html:has(head link[rel="canonical"][href$="/news/"]) .ns-body a,
html:has(head link[rel="canonical"][href$="/news/"]) .ns-body a:link,
html:has(head link[rel="canonical"][href$="/news/"]) .ns-body a:visited{
  display: inline;
  position: relative;

  /* remove all legacy underlines (this is what causes the purple line) */
  text-decoration: none !important;
  border-bottom: none !important;
  box-shadow: none !important;
  -webkit-text-decoration: none !important;

  /* ensure visited doesn't turn purple */
  color: inherit !important;
  -webkit-text-fill-color: currentColor;

  /* bold only hyperlink text */
  font-weight: 750 !important;

  /* About-style underline gap */
  padding-bottom: 3px;
  background-origin: content-box;

  /* SAME gradient as About */
  background-image: var(--nk-inkgrad);
  background-repeat: no-repeat;
  background-position: 0 118%;
  background-size: 0% 2.5px;

  transition: background-size .30s ease, color .18s ease;
}

/* Hover: grow the gradient underline (same as About) */
html:has(head link[rel="canonical"][href$="/news/"]) .ns-body a:hover{
  background-size: 100% 2.5px;
  color: var(--nk-accent) !important;
}
body.dark html:has(head link[rel="canonical"][href$="/news/"]) .ns-body a:hover{
  color: #ddd8d8 !important;
}

/* Kill any older ::after underline animations on news links */
html:has(head link[rel="canonical"][href$="/news/"]) .ns-body a::after{
  content: none !important;
  display: none !important;
}

  /* =========================================================
   CONTACT — hero blurb hover effect (matches cards + research)
   ========================================================= */

html:has(head link[rel="canonical"][href*="/contact"]) .ct-hero{
  transition:
    transform .16s ease,
    box-shadow .18s ease,
    border-color .18s ease;
}

/* Hover lift + shadow */
html:has(head link[rel="canonical"][href*="/contact"]) .ct-hero:hover{
  transform: translateY(-2px);
  box-shadow: var(--ct-shadow, 0 10px 30px rgba(17,24,39,.06));
  border-color: color-mix(in srgb, var(--ct-accent) 24%, transparent);
}

/* Dark mode parity */
body.dark
html:has(head link[rel="canonical"][href*="/contact"]) .ct-hero:hover{
  border-color: color-mix(in srgb, #ddd8d8 22%, transparent);
}





  
  

